
from collections import defaultdict

class Solution:
    def groupAnagram(self, strs):
        anagrams = defaultdict(list)
        for word in strs:
            count = [0] * 26  # Initialize count array for each word
            for char in word:
                count[ord(char) - ord('a')] += 1  # Count frequency of each character
            anagrams[tuple(count)].append(word)  # Use tuple of counts as key
        
        result = []
        for group in anagrams.values():
            result.append(' '.join(sorted(group)))  # Sort the group
        
        return sorted(result)  # Sort the entire result list

# Example usage:
sol = Solution()
input_list = ["eat", "tea", "tan", "ate", "nat", "bat"]
output = sol.groupAnagram(input_list)
for group in output:
    print(group)
